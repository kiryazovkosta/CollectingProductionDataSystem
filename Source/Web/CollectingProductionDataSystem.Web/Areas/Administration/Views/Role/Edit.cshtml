@using CollectingProductionDataSystem.Models.Identity;
@using CollectingProductionDataSystem.Web.ViewModels.Identity;
@model RoleEditViewModel
@{
    Layout = "~/Areas/Administration/Views/Shared/_KendoAdminLayout.cshtml";
    ViewBag.Title = "Редактиране на роля";
}
@Html.ValidationSummary(false)
@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    <input type="hidden" name="RoleName" value="@Model.Role.Name" />
    <div class="row">
        <div class="col-md-6">
            <div class="panel panel-primary">
                <div class="panel-heading">Добавяне към ролята "@Model.Role.Name"</div>
                @(Html.Kendo()
                        .Grid(Model.NonMembers)
                        .Name("IdsToAdd")
                        .Columns(col =>
                        {
                            col.Bound(c => c.UserName);
                            col.Bound(c => c.FullName);
                            col.Bound(c => c.Id).ClientTemplate("<input type='checkbox' name='IdsToAdd' value='#:Id #' />").HeaderTemplate("За добавяне");
                        })
.Pageable(pageable => pageable
            .Refresh(true)
            .PageSizes(new[] { 15, 20, 50, 100 })
            .ButtonCount(5)
        )
.Scrollable(scr => scr.Height(420))
.Filterable()
.DataSource(dataSource => dataSource
        .Ajax()
        .PageSize(15)
        .ServerOperation(false)
                            .Model(model =>
                            {
                                model.Id(p => p.Id);
                                model.Field(p => p.UserName);
                                model.Field(p => p.FullName);
                                model.Field(p => p.Id);
                            })
    )
                )

            </div>
        </div>
        <div class="col-md-6">
            <div class="panel panel-primary">
                <div class="panel-heading">Премахване от ролята "@Model.Role.Name"</div>
                @(Html.Kendo()
                        .Grid(Model.Members)
                        .Name("IdsToDelete")
                        .Columns(col =>
                        {
                            col.Bound(c => c.UserName);
                            col.Bound(c => c.FullName);
                            col.Bound(c => c.Id).ClientTemplate("<input type='checkbox' name='IdsToDelete' value='#:Id #' />").HeaderTemplate("За добавяне");
                        })
.Pageable(pageable => pageable
            .Refresh(true)
            .PageSizes(new[] { 15, 20, 50, 100 })
            .ButtonCount(5)
          )
.Scrollable(scr => scr.Height(420))
.Filterable()
.DataSource(dataSource => dataSource
            .Ajax()
            .PageSize(15)
            .ServerOperation(false)
        )
                )

            </div>
        </div>
    </div>

    <div class="well well-sm clearfix well-roles">
        <div class="row row-roles-well">
            <div class="col-md-4">
                <div class="form-group form-horizontal">
                    <div class="row">
                        @Html.LabelFor(m => m.Name, new { @class = "control-label col-md-3" })
                        @Html.EditorFor(m => m.Name, new { htmlAttributes = new { @class = "form-control col-md-9" } })
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group form-horizontal">
                    <div class="row">
                        @Html.LabelFor(m => m.Description, new { @class = "control-label col-md-3" })
                        @Html.EditorFor(m => m.Description, new { htmlAttributes = new { @class = "form-control col-md-9" } })
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="pull-right">
                    <button type="submit" class="btn btn-primary">Запис</button>
                    @Html.ActionLink("Cancel", "Index", null, new { @class = "btn btn-default" })
                </div>
            </div>
        </div>
    </div>
}

